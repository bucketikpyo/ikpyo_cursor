# 설문 분석 프로세스 가이드

## 📋 개요

이 문서는 SurveyMonkey 등에서 수집한 설문 데이터를 Cursor AI를 활용하여 분석하는 전체 프로세스를 정리한 가이드입니다.

---

## 1. 사전 준비

### 1.1 필요한 파일
| 파일 | 설명 | 형식 |
|------|------|------|
| 리서치 계획서 | 설문 목적, 가설, 타겟 정의 | .md (노션 export) |
| Raw 데이터 | 설문 응답 원본 데이터 | .csv (SurveyMonkey export) |

### 1.2 SurveyMonkey CSV 특징
- **Row 1**: 메인 질문 (예: "침대 사용 빈도는?")
- **Row 2**: 세부 보기/옵션 (복수선택 문항의 경우 각 옵션별 컬럼)
- **Row 3~**: 실제 응답 데이터

### 1.3 설문 로직 파악 (중요!)
설문에 적용된 **스킵 로직**을 미리 파악해야 함:
```
예시:
- 특정 문항 "A" 선택 → 다음 문항 스킵
- 특정 문항 "B" 선택 → 추가 문항으로 이동
```

---

## 2. 분석 프로세스

### 2.1 단계별 진행

```
Step 1: 데이터 로드 및 헤더 파싱
    ↓
Step 2: 복수선택 문항 변환 + 로직 스킵 처리 + 파생변수 생성
    ↓
Step 3: 분석 그룹 정의 및 샘플 사이즈 확인
    ↓
Step 4: 핵심 분석 항목 그룹별 비교
    ↓
Step 5: 교차 분석
    ↓
Step 6: 시각화 차트 생성
    ↓
Step 7: 주관식 응답 분석
    ↓
Step 8: 분석 결과 리포트 작성
    ↓
Step 9: 검증 및 리뷰
```

### 2.2 각 단계 상세

#### Step 1: 데이터 로드 및 헤더 파싱

```python
import pandas as pd

# 2줄 헤더로 로드
df_raw = pd.read_csv('raw_data.csv', header=[0, 1])

# 컬럼명 평탄화 (두 줄 헤더 합치기)
new_columns = []
for col1, col2 in df_raw.columns:
    if 'Unnamed:' in col1:
        new_columns.append(col2)
    elif 'Unnamed:' in col2:
        new_columns.append(col1)
    else:
        new_columns.append(f"{col1}_{col2}")

df_raw.columns = new_columns
```

#### Step 2: 복수선택 문항 변환 + 로직 스킵 처리

**복수선택 문항 처리**:
- 여러 컬럼에 분산된 응답을 하나의 리스트로 통합
- 또는 각 옵션별 Boolean 컬럼 생성

**로직 스킵 처리**:
```python
import numpy as np

# 특정 조건 → 후속 문항 결측 처리
skip_mask = df['Q_이전'] == '스킵조건'
df.loc[skip_mask, ['Q_후속1', 'Q_후속2']] = np.nan
```

#### Step 3: 분석 그룹 정의

```python
# 파생변수 생성 (예시 - 프로젝트별로 정의 다름)
df['is_그룹A'] = df['Q1'] == '조건1'
df['is_그룹B'] = df['Q2'] == '조건2'
df['is_타겟'] = df['is_그룹A'] & df['is_그룹B'] & df['Q3'].isin([...])

# 그룹 필터링
group1 = df.copy()  # 전체
group2 = df[df['is_그룹A'] & df['is_그룹B']]  # 중간 필터
group3 = df[df['is_타겟']]  # 핵심 타겟
```

> ⚠️ **중요**: 그룹 정의는 반드시 리서치 계획서를 기반으로 설정.  
> 이전 프로젝트 코드를 그대로 복사하지 않기!

#### Step 4-6: 분석 및 시각화

각 분석 항목별로:
1. 빈도 분석 (단일/복수 선택)
2. 그룹별 비교 (%, 명수)
3. 교차 분석 (A × B)
4. 시각화 차트 생성

#### Step 7: 주관식 응답 분석

```python
# "기타" 응답 컬럼 찾기
기타_cols = [col for col in df.columns if '기타' in col]

# 타겟 그룹의 주관식 응답 추출
타겟_주관식 = df[df['is_타겟']][기타_cols].dropna()
```

---

## 3. 리포트 작성 가이드

### 3.1 필수 포함 요소

| 섹션 | 내용 |
|------|------|
| **Executive Summary** | 핵심 발견사항 4-5개, 베이스 명시 |
| **분석 대상 정의** | 각 그룹의 필터 조건, n수, 비율 |
| **가설 검증** | 가설별 검증 결과 (✅/❌), 증거 수치 |
| **핵심 인사이트** | 정량+정성 데이터 통합 인사이트 |
| **제언** | 비즈니스 액션 연결 |

### 3.2 표 작성 규칙

**필수 표기 사항**:
1. **베이스(n수)**: 표 헤더에 명시
2. **퍼센트 + 명수**: 모든 셀에 함께 표기
3. **특이값 강조**: Bold 처리

**예시**:
```markdown
| 항목 | 전체 (n=500) | 타겟 (n=100) |
|------|--------------|--------------|
| 옵션A | 60.0% (300명) | **75.0% (75명)** |
```

### 3.3 인사이트 작성 규칙

1. **수치 근거 명시**: "75.0%가 A 선택 (전체 대비 +15.0%p)"
2. **베이스 명시**: "(타겟 n=100 기준)"
3. **갭 분석 추가**: "중요도 90% vs 만족도 40% = 50%p 갭"

---

## 4. 검증 프로세스

### 4.1 데이터 정합성 검증

```python
# Raw 데이터와 분석 결과 대조
raw_count = (df_raw['Q'] == '특정값').sum()
calculated_pct = raw_count / len(df_raw) * 100
print(f"검증: {calculated_pct:.1f}% ({raw_count}명)")
```

### 4.2 검증 체크리스트

- [ ] 베이스(n수) 정확성
- [ ] 퍼센트 계산 정확성
- [ ] 로직 스킵 처리 정확성
- [ ] 그룹 필터링 정확성
- [ ] 복수선택 문항 처리 정확성
- [ ] 주관식 응답 누락 없음

### 4.3 리포트 품질 체크

- [ ] 서머리에 핵심 수치 포함
- [ ] 모든 표에 베이스 + 명수 표기
- [ ] 가설 검증 결과 명확
- [ ] 제언이 데이터 기반
- [ ] 오탈자/수치 오류 없음

---

## 5. 산출물 목록

### 5.1 분석 결과 폴더 구조

```
프로젝트폴더/
├── 리서치_계획서.md          # 노션 export
├── raw_data.csv              # 원본 데이터
├── 분석결과/
│   ├── cleaned_data.csv             # 정제된 데이터
│   ├── 분석_결과_리포트.md          # 분석 리포트
│   ├── 분석_결과_리포트_노션용.md   # 노션 복사용
│   ├── chart_1.png                  # 차트
│   ├── chart_2.png                  # 차트
│   └── ...
└── 분석_스크립트.py                 # Python 코드 (선택)
```

### 5.2 최종 산출물

| 파일 | 용도 |
|------|------|
| `*_노션용.md` | 노션에 복사-붙여넣기용 |
| `*.png` | 노션에 이미지 삽입용 |
| `*_cleaned.csv` | 추가 분석용 정제 데이터 |

---

## 6. 자주 하는 실수 및 주의사항

### 6.1 흔한 실수

| 실수 | 해결책 |
|------|--------|
| 베이스 누락 | 모든 표/수치에 n수 명시 |
| 로직 스킵 미처리 | 설문 로직 먼저 파악 후 결측 처리 |
| 그룹별 베이스 혼동 | 조건부 분석 시 해당 그룹 n수 사용 |
| 복수선택 합계 100% 초과 | 복수선택은 합계 100% 초과 정상 |
| 주관식 누락 | 기타 응답 별도 분석 추가 |

### 6.2 타겟 그룹 정의 주의사항

> ⚠️ **매우 중요**

```
타겟 그룹 정의는 프로젝트마다 다를 수 있음:

1. 반드시 리서치 계획서의 타겟 정의를 먼저 확인
2. 필터 조건을 명확히 정의하고 문서화
3. 이전 프로젝트의 정의를 그대로 사용하지 않기
4. 분석 시작 전 타겟 정의를 사용자에게 확인받기

예시:
- 프로젝트 A: "타겟" = 조건1 + 조건2 + 조건3
- 프로젝트 B: "타겟" = 조건1 + 조건2 (조건3 없음)

→ 같은 용어라도 프로젝트마다 정의가 다를 수 있음!
→ 이전 프로젝트 코드/정의를 그대로 복사하면 오류 발생!
```

---

## 7. Cursor AI 활용 팁

### 7.1 효과적인 프롬프트

**데이터 로드 시**:
```
"이 CSV 파일은 SurveyMonkey에서 export한 설문 결과야.
Row 1, 2가 헤더이고 Row 3부터 응답이야.
로직이 적용되어 있어서 일부 응답은 스킵되었어.
먼저 데이터 구조를 파악해줘."
```

**분석 요청 시**:
```
"분석 대상은 그룹으로 나눠서 비교 분석해줘.
그룹 정의는 리서치 계획서를 참고해줘.
각 표에는 퍼센트와 명수를 함께 표기해줘."
```

**타겟 정의 확인 시**:
```
"리서치 계획서에서 타겟 그룹의 정의를 확인해줘.
필터 조건이 무엇인지 명확히 정리해줘.
분석 전에 이 정의가 맞는지 확인받을게."
```

**검증 요청 시**:
```
"분석 결과를 raw data와 대조해서 검증해줘.
몇 가지 주요 수치가 맞는지 확인하고 싶어."
```

### 7.2 작업 순서 권장

1. 리서치 계획서 먼저 공유 (목적/가설 이해)
2. **타겟 그룹 정의 확인 및 합의** ⭐
3. Raw 데이터 공유 (구조 파악)
4. 설문 로직 공유 (스킵 조건)
5. 분석 그룹 정의 요청
6. 단계별 분석 진행
7. 검증 요청
8. 리포트 최종 검토

---

## 8. 버전 히스토리

| 버전 | 날짜 | 변경 내용 |
|------|------|----------|
| v1.0 | 2026-01-05 | 최초 작성 |
| v1.1 | 2026-01-05 | 타겟 정의 주의사항 강화, 특정 프로젝트 예시 일반화 |

---

*작성: Cursor AI*  
*본 가이드는 특정 프로젝트에 종속되지 않은 일반 가이드입니다.*
